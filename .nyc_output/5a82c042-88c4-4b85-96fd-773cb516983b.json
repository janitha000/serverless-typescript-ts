{"D:\\Learning\\Serverless\\serverless-step\\aws\\IAM-aurora.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\aws\\IAM-aurora.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":0},"end":{"line":48,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/aws/IAM-aurora.ts","sources":["D:/Learning/Serverless/serverless-step/aws/IAM-aurora.ts"],"names":[],"mappings":";;;AAEa,QAAA,QAAQ,GAAkC;IACnD,UAAU,EAAE;QACR,IAAI,EAAE,gBAAgB;QACtB,UAAU,EAAE;YACR,wBAAwB,EAAE;gBACtB,OAAO,EAAE,YAAY;gBACrB,SAAS,EAAE;oBACP;wBACI,MAAM,EAAE,OAAO;wBACf,SAAS,EAAE;4BACP,OAAO,EAAE,sBAAsB;yBAClC;wBACD,MAAM,EAAE,CAAC,gBAAgB,CAAC;qBAC7B;iBACJ;aACJ;YACD,QAAQ,EAAE;gBACN;oBACI,UAAU,EAAE,sBAAsB;oBAClC,cAAc,EAAE;wBACZ,OAAO,EAAE,YAAY;wBACrB,SAAS,EAAE;4BACP;gCACI,QAAQ,EAAE,OAAO;gCACjB,QAAQ,EAAE;oCACN,+BAA+B;oCAC/B,qBAAqB;oCACrB,2BAA2B;oCAC3B,gCAAgC;oCAChC,2BAA2B;oCAC3B,4BAA4B;oCAC5B,8BAA8B;oCAC9B,6BAA6B;oCAC7B,4BAA4B;oCAC5B,kCAAkC;iCACrC;gCACD,UAAU,EAAE,GAAG;6BAClB;yBACJ;qBACJ;iBACJ;aACJ;SACJ;KACJ;CAEJ,CAAA","sourcesContent":["import { AWS } from '@serverless/typescript';\r\n\r\nexport const IAMRoles: AWS['resources']['Resources'] = {\r\n    AuroraRole: {\r\n        Type: 'AWS::IAM::Role',\r\n        Properties: {\r\n            AssumeRolePolicyDocument: {\r\n                Version: \"2012-10-17\",\r\n                Statement: [\r\n                    {\r\n                        Effect: 'Allow',\r\n                        Principal: {\r\n                            Service: 'lambda.amazonaws.com'\r\n                        },\r\n                        Action: ['sts:AssumeRole']\r\n                    }\r\n                ]\r\n            },\r\n            Policies: [\r\n                {\r\n                    PolicyName: \"EmbeddedInlinePolicy\",\r\n                    PolicyDocument: {\r\n                        Version: \"2012-10-17\",\r\n                        Statement: [\r\n                            {\r\n                                \"Effect\": \"Allow\",\r\n                                \"Action\": [\r\n                                    \"secretsmanager:GetSecretValue\",\r\n                                    \"rds-data:ExecuteSql\",\r\n                                    \"rds-data:ExecuteStatement\",\r\n                                    \"rds-data:BatchExecuteStatement\",\r\n                                    \"rds-data:BeginTransaction\",\r\n                                    \"rds-data:CommitTransaction\",\r\n                                    \"rds-data:RollbackTransaction\",\r\n                                    \"secretsmanager:CreateSecret\",\r\n                                    \"secretsmanager:ListSecrets\",\r\n                                    \"secretsmanager:GetRandomPassword\"\r\n                                ],\r\n                                \"Resource\": \"*\"\r\n                            }\r\n                        ]\r\n                    }\r\n                }\r\n            ],\r\n        },\r\n    }\r\n\r\n}\r\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\databaseLayer\\serverless.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\databaseLayer\\serverless.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":32},"end":{"line":52,"column":1}},"2":{"start":{"line":53,"column":0},"end":{"line":53,"column":41}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/databaseLayer/serverless.ts","sources":["D:/Learning/Serverless/serverless-step/databaseLayer/serverless.ts"],"names":[],"mappings":";;AAEA,MAAM,uBAAuB,GAAQ;IACnC,OAAO,EAAE,eAAe;IACxB,gBAAgB,EAAE,GAAG;IACrB,OAAO,EAAE,CAAC,oBAAoB,CAAC;IAC/B,SAAS,EAAE,IAAI;IACf,QAAQ,EAAE;QACR,IAAI,EAAE,KAAK;QACX,OAAO,EAAE,YAAY;QACrB,MAAM,EAAE,gBAAgB;QACxB,UAAU,EAAE;YACV,sBAAsB,EAAE,IAAI;YAC5B,0BAA0B,EAAE,IAAI;SACjC;QACD,WAAW,EAAE;YACX,mCAAmC,EAAE,GAAG;YACxC,YAAY,EAAE,+CAA+C;SAC9D;KACF;IAED,OAAO,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE;IAC/B,MAAM,EAAE;QACN,OAAO,EAAE;YACP,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,KAAK;YACb,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,CAAC,SAAS,CAAC;YACpB,MAAM,EAAE,QAAQ;YAChB,MAAM,EAAE,EAAE,iBAAiB,EAAE,SAAS,EAAE;YACxC,QAAQ,EAAE,MAAM;YAChB,WAAW,EAAE,EAAE;SAChB;KACF;IACD,MAAM,EAAE;QACN,QAAQ,EAAE;YACR,IAAI,EAAE,UAAU;YAChB,kBAAkB,EAAE,CAAC,YAAY,CAAC;SACnC;KACF;IACD,SAAS,EAAE;QACT,OAAO,EAAE;YACP,aAAa,EAAE;gBACb,KAAK,EAAE;oBACL,KAAK,EAAE,qBAAqB;iBAC7B;gBACD,MAAM,EAAE;oBACN,MAAM,EAAE,qBAAqB;iBAC9B;aACF;SACF;KACF;CAEF,CAAC;AAEF,MAAM,CAAC,OAAO,GAAG,uBAAuB,CAAC","sourcesContent":["import type { AWS } from '@serverless/typescript';\n\nconst serverlessConfiguration: AWS = {\n  service: 'databaselayer',\n  frameworkVersion: '3',\n  plugins: ['serverless-esbuild'],\n  useDotenv: true,\n  provider: {\n    name: 'aws',\n    runtime: 'nodejs14.x',\n    region: 'ap-southeast-1',\n    apiGateway: {\n      minimumCompressionSize: 1024,\n      shouldStartNameWithService: true,\n    },\n    environment: {\n      AWS_NODEJS_CONNECTION_REUSE_ENABLED: '1',\n      NODE_OPTIONS: '--enable-source-maps --stack-trace-limit=1000',\n    },\n  },\n  // import the function via paths\n  package: { individually: true },\n  custom: {\n    esbuild: {\n      bundle: true,\n      minify: false,\n      sourcemap: true,\n      exclude: ['aws-sdk'],\n      target: 'node14',\n      define: { 'require.resolve': undefined },\n      platform: 'node',\n      concurrency: 10,\n    },\n  },\n  layers: {\n    database: {\n      path: 'database',\n      compatibleRuntimes: [\"nodejs14.x\"]\n    },\n  },\n  resources: {\n    Outputs: {\n      databaseLayer: {\n        Value: {\n          \"Ref\": \"DatabaseLambdaLayer\"\n        },\n        Export: {\n          \"Name\": \"DatabaseLambdaLayer\"\n        }\n      }\n    }\n  }\n\n};\n\nmodule.exports = serverlessConfiguration;\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\serverless.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\serverless.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":57}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":46}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":46}},"4":{"start":{"line":6,"column":32},"end":{"line":68,"column":1}},"5":{"start":{"line":69,"column":0},"end":{"line":69,"column":41}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/serverless.ts","sources":["D:/Learning/Serverless/serverless-step/serverless.ts"],"names":[],"mappings":";;AACA,0DAAsD;AAEtD,+CAA4C;AAC5C,+CAAyC;AAEzC,MAAM,uBAAuB,GAAQ;IACnC,OAAO,EAAE,iBAAiB;IAC1B,gBAAgB,EAAE,GAAG;IACrB,SAAS,EAAE,IAAI;IACf,OAAO,EAAE,CAAC,oBAAoB,EAAE,2BAA2B,EAAE,oBAAoB,EAAE,8BAA8B,EAAE,uBAAuB,CAAC;IAC3I,QAAQ,EAAE;QACR,IAAI,EAAE,KAAK;QACX,OAAO,EAAE,YAAY;QACrB,MAAM,EAAE,gBAAgB;QACxB,UAAU,EAAE;YACV,sBAAsB,EAAE,IAAI;YAC5B,0BAA0B,EAAE,IAAI;SACjC;QACD,WAAW,EAAE;YACX,mCAAmC,EAAE,GAAG;YACxC,YAAY,EAAE,+CAA+C;YAC7D,qBAAqB,EAAE,sHAAsH;YAC7I,SAAS,EAAE,+CAA+C;YAC1D,WAAW,EAAE,oBAAoB;SAGlC;KACF;IAED,SAAS,EAAT,qBAAS;IACT,OAAO,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE;IAC/B,MAAM,EAAE;QACN,OAAO,EAAE;YACP,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,KAAK;YACb,SAAS,EAAE,IAAI;YAEf,OAAO,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC;YAChC,MAAM,EAAE,QAAQ;YAChB,MAAM,EAAE,EAAE,iBAAiB,EAAE,SAAS,EAAE;YACxC,QAAQ,EAAE,MAAM;YAChB,WAAW,EAAE,EAAE;SAChB;QACD,aAAa,EAAE;YACb,IAAI,EAAE;gBACJ,OAAO,EAAE,GAAG;gBACZ,KAAK,EAAE,kBAAkB;gBACzB,WAAW,EAAE,2BAA2B;aACzC;SACF;QACD,UAAU,EAAE;YACV,MAAM,EAAE,CAAC,OAAO,CAAC;YACjB,MAAM,EAAE;gBACN,SAAS,EAAE,MAAM;aAClB;YACD,MAAM,EAAE;gBACN,IAAI,EAAE,OAAO;aACd;SAIF;KACF;IAED,aAAa,EAAE;QACb,UAAU,EAAE,MAAM;QAClB,aAAa,EAAE;YACb,GAAG,iBAAO;SACX;KACF;IACD,SAAS,EAAE;QACT,SAAS,EAAE;YACT,GAAG,qBAAQ;SACZ;KACF;CACF,CAAA;AAED,MAAM,CAAC,OAAO,GAAG,uBAAuB,CAAC","sourcesContent":["import type { AWS } from '@serverless/typescript';\nimport { machine } from './src/step-functions/machine'\n// import hello from '@functions/hello';\nimport { functions } from './src/functions';\nimport { IAMRoles } from 'aws/IAM-aurora'\n\nconst serverlessConfiguration: AWS = {\n  service: 'serverless-step',\n  frameworkVersion: '3',\n  useDotenv: true,\n  plugins: ['serverless-esbuild', 'serverless-step-functions', 'serverless-offline', 'serverless-aws-documentation', 'serverless-localstack'],\n  provider: {\n    name: 'aws',\n    runtime: 'nodejs14.x',\n    region: 'ap-southeast-1',\n    apiGateway: {\n      minimumCompressionSize: 1024,\n      shouldStartNameWithService: true,\n    },\n    environment: {\n      AWS_NODEJS_CONNECTION_REUSE_ENABLED: '1',\n      NODE_OPTIONS: '--enable-source-maps --stack-trace-limit=1000',\n      ONUSERUPDATE_EVENTBUS: 'arn:aws:events:ap-southeast-1:628640267234:event-bus/aws.partner/mongodb.com/stitch.trigger/626b8954f1cb6a1f43679ac5',\n      NODE_PATH: \"./:/opt/node_modules:/opt/nodejs/node_modules\",\n      MONGODB_URL: '${env:MONGODB_URL}',\n      // API_URL_BASE: { \"Fn::Join\": [\"\", [\"https://\", { \"Ref\": \"apiGatewayRestApi\" }, \".execute-api-${aws:region}.amazonaws.com/${sls:stage}\"]] }\n\n    },\n  },\n  // import the function via paths\n  functions,\n  package: { individually: true },\n  custom: {\n    esbuild: {\n      bundle: true,\n      minify: false,\n      sourcemap: true,\n      // exclude: ['aws-sdk', \"database\"],\n      exclude: ['aws-sdk', \"database\"],\n      target: 'node14',\n      define: { 'require.resolve': undefined },\n      platform: 'node',\n      concurrency: 10,\n    },\n    documentation: {\n      info: {\n        version: \"2\",\n        title: \"Name of your API\",\n        description: \"This is the best API ever\"\n      }\n    },\n    localstack: {\n      stages: ['local'],\n      lambda: {\n        mountCode: \"True\"\n      },\n      docker: {\n        sudo: \"False\"\n      }\n\n\n\n    }\n  },\n  // @ts-ignore\n  stepFunctions: {\n    \"validate\": \"true\",\n    stateMachines: {\n      ...machine\n    },\n  },\n  resources: {\n    Resources: {\n      ...IAMRoles\n    }\n  }\n}\n\nmodule.exports = serverlessConfiguration;\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\common\\logger.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\common\\logger.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":39}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":45}},"5":{"start":{"line":9,"column":8},"end":{"line":12,"column":10}},"6":{"start":{"line":10,"column":12},"end":{"line":10,"column":119}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":49}},"8":{"start":{"line":13,"column":8},"end":{"line":16,"column":10}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":115}},"10":{"start":{"line":15,"column":12},"end":{"line":15,"column":49}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"12":{"start":{"line":20,"column":0},"end":{"line":20,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":27},"end":{"line":18,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":21},"end":{"line":9,"column":22}},"loc":{"start":{"line":9,"column":34},"end":{"line":12,"column":9}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":20},"end":{"line":13,"column":21}},"loc":{"start":{"line":13,"column":33},"end":{"line":16,"column":9}},"line":13}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/common/logger.ts","sources":["D:/Learning/Serverless/serverless-step/src/common/logger.ts"],"names":[],"mappings":";;;AACA,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;AACtC,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;AACxC,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;AAC9C,MAAa,MAAM;IAGf,YAAY,SAAiB;QAI7B,UAAK,GAAG,CAAC,OAAmB,EAAE,EAAE;YAC5B,OAAO,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,OAAO,EAAE,CAAC;YAC3G,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QACzC,CAAC,CAAA;QAED,SAAI,GAAG,CAAC,OAAmB,EAAE,EAAE;YAC3B,OAAO,GAAG,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,OAAO,EAAE,CAAC;YACvG,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;QACzC,CAAC,CAAA;QAXG,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAChC,CAAC;CAWJ;AAhBD,wBAgBC","sourcesContent":["\r\nconst app_name = process.env.APP_NAME;\r\nconst app_stage = process.env.APP_SATGE;\r\nconst service_name = process.env.SERVICE_NAME;\r\nexport class Logger {\r\n    _contextId: string;\r\n\r\n    constructor(contextId: string) {\r\n        this._contextId = contextId;\r\n    }\r\n\r\n    Error = (payload: LogPayload) => {\r\n        payload = { app_name, app_stage, service_name, context_id: this._contextId, type: 'CRITICAL', ...payload };\r\n        console.log(JSON.stringify(payload));\r\n    }\r\n\r\n    INFO = (payload: LogPayload) => {\r\n        payload = { app_name, app_stage, service_name, context_id: this._contextId, type: 'INFO', ...payload };\r\n        console.log(JSON.stringify(payload));\r\n    }\r\n}\r\n\r\nexport interface LogPayload {\r\n    app_name?: string;\r\n    app_stage?: string;\r\n    service_name?: string;\r\n    context_id?: string;\r\n    type?: string;\r\n    data?: any;\r\n    message?: string;\r\n    callstack?: string;\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\aurora\\auroraDb.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\aurora\\auroraDb.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":30}},"3":{"start":{"line":5,"column":0},"end":{"line":10,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/aurora/auroraDb.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/aurora/auroraDb.ts"],"names":[],"mappings":";;;AAAA,+BAA+B;AAElB,QAAA,QAAQ,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;IAC/C,GAAG;IACH,SAAS,EAAE,wFAAwF;IACnG,WAAW,EAAE,iEAAiE;IAC9E,QAAQ,EAAE,YAAY;CACzB,CAAC,CAAA","sourcesContent":["import * as AWS from 'aws-sdk';\r\n\r\nexport const database = require('data-api-client')({\r\n    AWS,\r\n    secretArn: 'arn:aws:secretsmanager:ap-southeast-1:628640267234:secret:serverlesshellosecret-A8qX3w',\r\n    resourceArn: 'arn:aws:rds:ap-southeast-1:628640267234:cluster:serverlesshello',\r\n    database: 'auroratest' // default database\r\n})\r\n\r\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\aurora\\index.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\aurora\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":19},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":23},"end":{"line":15,"column":1}},"5":{"start":{"line":7,"column":4},"end":{"line":14,"column":5}},"6":{"start":{"line":8,"column":22},"end":{"line":8,"column":45}},"7":{"start":{"line":9,"column":22},"end":{"line":9,"column":60}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":64}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":62}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":23},"end":{"line":6,"column":24}},"loc":{"start":{"line":6,"column":35},"end":{"line":15,"column":1}},"line":6}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/aurora/index.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/aurora/index.ts"],"names":[],"mappings":";;;AAAA,mDAAuD;AACvD,yCAAsC;AAG/B,MAAM,cAAc,GAAG,KAAK,IAAI,EAAE;IACrC,IAAI;QACA,MAAM,KAAK,GAAG,uBAAuB,CAAC;QACtC,MAAM,KAAK,GAAG,MAAM,mBAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC1C,OAAO,IAAA,gCAAkB,EAAC,EAAE,KAAK,EAAE,CAAC,CAAC;KACxC;IACD,OAAO,GAAG,EAAE;QACR,OAAO,IAAA,gCAAkB,EAAC,EAAE,GAAG,EAAE,CAAC,CAAC;KACtC;AACL,CAAC,CAAA;AATY,QAAA,cAAc,kBAS1B","sourcesContent":["import { formatJSONResponse } from '@libs/api-gateway';\r\nimport { database } from './auroraDb';\r\n\r\n\r\nexport const getAuroraUsers = async () => {\r\n    try {\r\n        const query = `SELECT * FROM Persons`;\r\n        const users = await database.query(query);\r\n        return formatJSONResponse({ users });\r\n    }\r\n    catch (err) {\r\n        return formatJSONResponse({ err });\r\n    }\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\handler.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\handler.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":24},"end":{"line":5,"column":50}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":21},"end":{"line":7,"column":45}},"6":{"start":{"line":8,"column":14},"end":{"line":16,"column":1}},"7":{"start":{"line":9,"column":19},"end":{"line":9,"column":60}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":42}},"9":{"start":{"line":11,"column":4},"end":{"line":15,"column":7}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":21}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":14},"end":{"line":8,"column":15}},"loc":{"start":{"line":8,"column":40},"end":{"line":16,"column":1}},"line":8}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/hello/handler.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/hello/handler.ts"],"names":[],"mappings":";;;AACA,mDAAuD;AAEvD,mDAA2C;AAC3C,gDAA6C;AAI7C,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;AAE9C,MAAM,KAAK,GAAsD,KAAK,EAAE,KAAK,EAAE,OAAgB,EAAE,EAAE;IACjG,MAAM,MAAM,GAAG,IAAI,eAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;IAChD,IAAA,wBAAQ,EAAC,MAAM,CAAC,CAAC;IACjB,OAAO,IAAA,gCAAkB,EAAC;QACxB,OAAO,EAAE,kDAAkD;QAC3D,GAAG,EAAE,GAAG,YAAY,QAAQ;QAC5B,KAAK;KACN,CAAC,CAAC;AACL,CAAC,CAAC;AAEW,QAAA,IAAI,GAAG,KAAK,CAAC","sourcesContent":["import type { ValidatedEventAPIGatewayProxyEvent } from '@libs/api-gateway';\nimport { formatJSONResponse } from '@libs/api-gateway';\n// import { middyfy } from '@libs/lambda';\nimport { helloLog } from './hello.service';\nimport { Logger } from '../../common/logger';\nimport schema from './schema';\nimport { Context } from 'aws-lambda';\n\nconst API_URL_BASE = process.env.API_URL_BASE;\n\nconst hello: ValidatedEventAPIGatewayProxyEvent<typeof schema> = async (event, context: Context) => {\n  const logger = new Logger(context.awsRequestId);\n  helloLog(logger);\n  return formatJSONResponse({\n    message: `Hello, welcome to the exciting Serverless world!`,\n    url: `${API_URL_BASE}/hello`,\n    event,\n  });\n};\n\nexport const main = hello;\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\hello.service.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\hello.service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"2":{"start":{"line":4,"column":17},"end":{"line":6,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":64}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}},"5":{"start":{"line":8,"column":18},"end":{"line":10,"column":1}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":65}},"7":{"start":{"line":11,"column":0},"end":{"line":11,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"loc":{"start":{"line":4,"column":29},"end":{"line":6,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":18},"end":{"line":8,"column":19}},"loc":{"start":{"line":8,"column":30},"end":{"line":10,"column":1}},"line":8}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/hello/hello.service.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/hello/hello.service.ts"],"names":[],"mappings":";;;AAEO,MAAM,QAAQ,GAAG,CAAC,MAAc,EAAE,EAAE;IACvC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,iCAAiC,EAAE,CAAC,CAAA;AAC/D,CAAC,CAAA;AAFY,QAAA,QAAQ,YAEpB;AAEM,MAAM,SAAS,GAAG,CAAC,MAAc,EAAE,EAAE;IACxC,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kCAAkC,EAAE,CAAC,CAAA;AAChE,CAAC,CAAA;AAFY,QAAA,SAAS,aAErB","sourcesContent":["import { Logger } from '../../common/logger';\r\n\r\nexport const helloLog = (logger: Logger) => {\r\n    logger.INFO({ message: 'This is from the hello function' })\r\n}\r\n\r\nexport const hello2Log = (logger: Logger) => {\r\n    logger.INFO({ message: 'This is from the hello2 function' })\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\input.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\input.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/hello/input.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/hello/input.ts"],"names":[],"mappings":"","sourcesContent":["export interface helloInput {\r\n    name: string\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\schema.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\hello\\schema.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":9,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/hello/schema.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/hello/schema.ts"],"names":[],"mappings":";;AAAA,kBAAe;IACb,IAAI,EAAE,QAAQ;IACd,UAAU,EAAE;QACV,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;KACzB;IACD,QAAQ,EAAE,CAAC,MAAM,CAAC;CACV,CAAC","sourcesContent":["export default {\n  type: \"object\",\n  properties: {\n    name: { type: 'string' }\n  },\n  required: ['name']\n} as const;\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\index.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":21},"end":{"line":15,"column":1}},"4":{"start":{"line":16,"column":0},"end":{"line":123,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/index.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/index.ts"],"names":[],"mappings":";;;AACA,2CAAoC;AAGpC,MAAM,YAAY,GAAG;IACjB,OAAO,EAAE;QAEL,cAAc;QACd,YAAY;QACZ,eAAe;QACf,WAAW;QACX,sBAAsB;QACtB,kBAAkB;KACrB;IACD,gBAAgB,EAAE,KAAK;CAC1B,CAAC;AAEW,QAAA,SAAS,GAAqB;IACvC,KAAK,EAAE;QACH,OAAO,EAAE,kCAAkC;QAC3C,MAAM,EAAE;YACJ;gBACI,IAAI,EAAE;oBACF,MAAM,EAAE,KAAK;oBACb,IAAI,EAAE,OAAO;oBACb,OAAO,EAAE;wBACL,OAAO,EAAE;4BACL,kBAAkB,EAAE,gBAAM;yBAC7B;qBACJ;oBAED,aAAa,EAAE;wBACX,OAAO,EAAE,kBAAkB;wBAC3B,WAAW,EAAE,4BAA4B;wBACzC,eAAe,EAAE;4BACb;gCACI,UAAU,EAAE,KAAK;gCACjB,YAAY,EAAE;oCACV,WAAW,EAAE,2BAA2B;iCAC3C;6BAEJ;yBACJ;qBACJ;iBACJ;aACJ;SACJ;KACJ;IACD,kBAAkB,EAAE;QAChB,OAAO,EAAE,4CAA4C;QACrD,MAAM,EAAE;YACJ;gBACI,IAAI,EAAE;oBACF,MAAM,EAAE,MAAM;oBACd,IAAI,EAAE,cAAc;iBACvB;aACJ;SACJ;KACJ;IACD,kBAAkB,EAAE;QAChB,OAAO,EAAE,4CAA4C;QACrD,MAAM,EAAE;YACJ;gBACI,IAAI,EAAE;oBACF,MAAM,EAAE,QAAQ;oBAChB,IAAI,EAAE,mBAAmB;iBAC5B;aACJ;SACJ;KACJ;IACD,YAAY,EAAE;QACV,OAAO,EAAE,0CAA0C;QACnD,MAAM,EAAE;YACJ;gBACI,WAAW,EAAE;oBACT,QAAQ,EAAE,sHAAsH;oBAChI,OAAO,EAAE;wBACL,QAAQ,EAAE,CAAC;gCACP,QAAQ,EAAE,yBAAyB;6BACtC,CAAC;qBACL;iBACJ;aACJ;SACJ;KACJ;IACD,YAAY,EAAE;QACV,OAAO,EAAE,0CAA0C;QACnD,MAAM,EAAE;YACJ;gBACI,WAAW,EAAE;oBACT,QAAQ,EAAE,sHAAsH;oBAChI,OAAO,EAAE;wBACL,QAAQ,EAAE,CAAC;gCACP,QAAQ,EAAE,yBAAyB;6BACtC,CAAC;qBACL;iBACJ;aACJ;SACJ;KACJ;IACD,WAAW,EAAE;QACT,OAAO,EAAE,mCAAmC;QAC5C,MAAM,EAAE;YACJ,0DAA0D;SAC7D;QACD,MAAM,EAAE;YACJ;gBACI,IAAI,EAAE;oBACF,MAAM,EAAE,KAAK;oBACb,IAAI,EAAE,OAAO;iBAChB;aACJ;SACJ;KACJ;IACD,cAAc,EAAE;QACZ,OAAO,EAAE,2CAA2C;QACpD,MAAM,EAAE;YACJ;gBACI,IAAI,EAAE;oBACF,MAAM,EAAE,KAAK;oBACb,IAAI,EAAE,cAAc;iBACvB;aACJ;SACJ;QACD,IAAI,EAAE,EAAE,YAAY,EAAE,CAAC,YAAY,EAAE,KAAK,CAAC,EAAE;KAEhD;CAEJ,CAAA","sourcesContent":["import { AWS } from '@serverless/typescript';\nimport schema from './hello/schema';\n\n//@ts-ignore\nconst corsSettings = {\n    headers: [\n        // Specify allowed headers\n        'Content-Type',\n        'X-Amz-Date',\n        'Authorization',\n        'X-Api-Key',\n        'X-Amz-Security-Token',\n        'X-Amz-User-Agent',\n    ],\n    allowCredentials: false,\n};\n\nexport const functions: AWS[\"functions\"] = {\n    hello: {\n        handler: `src/functions/hello/handler.main`,\n        events: [\n            {\n                http: {\n                    method: 'get',\n                    path: 'hello',\n                    request: {\n                        schemas: {\n                            'application/json': schema,\n                        },\n                    },\n                    //@ts-ignore\n                    documentation: {\n                        summary: \"Create something\",\n                        description: \"Creates the thing you need\",\n                        methodResponses: [\n                            {\n                                statusCode: \"200\",\n                                responseBody: {\n                                    description: \"Response body description\"\n                                }\n\n                            }\n                        ]\n                    }\n                },\n            },\n        ],\n    },\n    createStepFunction: {\n        handler: `src/functions/step/createStepFunction.main`,\n        events: [\n            {\n                http: {\n                    method: 'post',\n                    path: 'stepFunction',\n                },\n            },\n        ],\n    },\n    deleteStepFunction: {\n        handler: `src/functions/step/deleteStepFunction.main`,\n        events: [\n            {\n                http: {\n                    method: 'delete',\n                    path: 'stepFunction/{id}',\n                },\n            },\n        ],\n    },\n    onUserInsert: {\n        handler: `src/functions/mongo/handler.onUserInsert`,\n        events: [\n            {\n                eventBridge: {\n                    eventBus: 'arn:aws:events:ap-southeast-1:628640267234:event-bus/aws.partner/mongodb.com/stitch.trigger/626b7e7de092da9acd387154',\n                    pattern: {\n                        \"source\": [{\n                            \"prefix\": \"aws.partner/mongodb.com\"\n                        }]\n                    }\n                },\n            },\n        ],\n    },\n    onUserUpdate: {\n        handler: `src/functions/mongo/handler.onUserUpdate`,\n        events: [\n            {\n                eventBridge: {\n                    eventBus: 'arn:aws:events:ap-southeast-1:628640267234:event-bus/aws.partner/mongodb.com/stitch.trigger/626b8954f1cb6a1f43679ac5',\n                    pattern: {\n                        \"source\": [{\n                            \"prefix\": \"aws.partner/mongodb.com\"\n                        }]\n                    }\n                },\n            },\n        ],\n    },\n    getAllUsers: {\n        handler: `src/functions/mongo/getUsers.main`,\n        layers: [\n            \"${cf:databaselayer-${self:provider.stage}.databaseLayer}\"\n        ],\n        events: [\n            {\n                http: {\n                    method: 'get',\n                    path: 'users',\n                },\n            },\n        ],\n    },\n    getAuroraUsers: {\n        handler: `src/functions/aurora/index.getAuroraUsers`,\n        events: [\n            {\n                http: {\n                    method: 'get',\n                    path: 'aurora/users',\n                },\n            },\n        ],\n        role: { 'Fn::GetAtt': ['AuroraRole', 'Arn'] }\n\n    }\n\n}\n\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\mongo\\getUsers.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\mongo\\getUsers.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":47}},"4":{"start":{"line":6,"column":19},"end":{"line":6,"column":38}},"5":{"start":{"line":7,"column":10},"end":{"line":7,"column":33}},"6":{"start":{"line":8,"column":13},"end":{"line":25,"column":1}},"7":{"start":{"line":9,"column":4},"end":{"line":9,"column":51}},"8":{"start":{"line":10,"column":19},"end":{"line":10,"column":60}},"9":{"start":{"line":11,"column":4},"end":{"line":24,"column":5}},"10":{"start":{"line":12,"column":8},"end":{"line":12,"column":68}},"11":{"start":{"line":13,"column":8},"end":{"line":13,"column":41}},"12":{"start":{"line":14,"column":22},"end":{"line":14,"column":62}},"13":{"start":{"line":15,"column":8},"end":{"line":15,"column":37}},"14":{"start":{"line":16,"column":8},"end":{"line":16,"column":64}},"15":{"start":{"line":19,"column":8},"end":{"line":22,"column":11}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":62}},"17":{"start":{"line":26,"column":0},"end":{"line":26,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":13},"end":{"line":8,"column":14}},"loc":{"start":{"line":8,"column":40},"end":{"line":25,"column":1}},"line":8}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/mongo/getUsers.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/mongo/getUsers.ts"],"names":[],"mappings":";;;AACA,mDAAuD;AAIvD,gDAA4C;AAC5C,uCAA2C;AAE3C,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC;AAwB3B,MAAM,IAAI,GAAG,KAAK,EAAE,MAAuB,EAAE,OAAgB,EAAkC,EAAE;IACpG,OAAO,CAAC,8BAA8B,GAAG,KAAK,CAAC;IAC/C,MAAM,MAAM,GAAG,IAAI,eAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;IAChD,IAAI;QACA,MAAM,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,iCAAiC,EAAE,CAAC,CAAA;QAC3D,MAAM,IAAA,gBAAK,EAAC,GAAG,CAAC,CAAC;QACjB,MAAM,KAAK,GAAG,MAAM,oBAAS,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;QAC5C,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAA;QAC5B,OAAO,IAAA,gCAAkB,EAAC,EAAE,KAAK,EAAE,CAAC,CAAC;KACxC;IACD,OAAO,GAAG,EAAE;QACR,MAAM,CAAC,KAAK,CAAC;YACT,OAAO,EAAE,GAAG,CAAC,OAAO;YACpB,SAAS,EAAE,GAAG,CAAC,KAAK;SACvB,CAAC,CAAC;QACH,OAAO,IAAA,gCAAkB,EAAC,EAAE,GAAG,EAAE,CAAC,CAAC;KAEtC;AAGL,CAAC,CAAC;AApBW,QAAA,IAAI,QAoBf","sourcesContent":["\r\nimport { formatJSONResponse } from '@libs/api-gateway';\r\n// import { middyfy } from '@libs/lambda';\r\nimport { APIGatewayEvent, APIGatewayProxyResult, Context } from 'aws-lambda';\r\n// import { DbCon, UserModel } from '/opt/nodejs/database'\r\nimport { Logger } from '../../common/logger'\r\nimport { DbCon, UserModel } from 'database'\r\n\r\nlet uri = process.env.MONGODB_URL;\r\n\r\n// export const main = middyfy(async (_event: APIGatewayEvent, context: Context): Promise<APIGatewayProxyResult> => {\r\n//     context.callbackWaitsForEmptyEventLoop = false;\r\n//     const logger = new Logger(context.awsRequestId);\r\n//     try {\r\n//         logger.INFO({ message: \"Getting users from the database\" })\r\n//         await DbCon(uri);\r\n//         const users = await UserModel.find().lean();\r\n//         logger.INFO({ data: users })\r\n//         return formatJSONResponse({ users });\r\n//     }\r\n//     catch (err) {\r\n//         logger.Error({\r\n//             message: err.message,\r\n//             callstack: err.stack,\r\n//         });\r\n//         return formatJSONResponse({ err });\r\n\r\n//     }\r\n\r\n//     //return formatJSONResponse({});\r\n// });\r\n\r\nexport const main = async (_event: APIGatewayEvent, context: Context): Promise<APIGatewayProxyResult> => {\r\n    context.callbackWaitsForEmptyEventLoop = false;\r\n    const logger = new Logger(context.awsRequestId);\r\n    try {\r\n        logger.INFO({ message: \"Getting users from the database\" })\r\n        await DbCon(uri);\r\n        const users = await UserModel.find().lean();\r\n        logger.INFO({ data: users })\r\n        return formatJSONResponse({ users });\r\n    }\r\n    catch (err) {\r\n        logger.Error({\r\n            message: err.message,\r\n            callstack: err.stack,\r\n        });\r\n        return formatJSONResponse({ err });\r\n\r\n    }\r\n\r\n    //return formatJSONResponse({});\r\n};"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\mongo\\handler.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\mongo\\handler.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":53}},"2":{"start":{"line":4,"column":21},"end":{"line":7,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":4},"end":{"line":6,"column":23}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":21},"end":{"line":12,"column":1}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":52}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":23}},"9":{"start":{"line":13,"column":0},"end":{"line":13,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":21},"end":{"line":4,"column":22}},"loc":{"start":{"line":4,"column":32},"end":{"line":7,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":21},"end":{"line":9,"column":22}},"loc":{"start":{"line":9,"column":32},"end":{"line":12,"column":1}},"line":9}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/mongo/handler.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/mongo/handler.ts"],"names":[],"mappings":";;;AACO,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,EAAE;IAClC,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAA;IAC/C,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;AACtB,CAAC,CAAA;AAHY,QAAA,YAAY,gBAGxB;AAEM,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,EAAE;IAClC,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAA;IAC/C,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;AACtB,CAAC,CAAA;AAHY,QAAA,YAAY,gBAGxB","sourcesContent":["\r\nexport const onUserInsert = (event) => {\r\n    console.log('Executing the event from mongoDB')\r\n    console.log(event)\r\n}\r\n\r\nexport const onUserUpdate = (event) => {\r\n    console.log('Executing the event from mongoDB')\r\n    console.log(event)\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\step\\createStepFunction.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\step\\createStepFunction.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":13},"end":{"line":40,"column":1}},"5":{"start":{"line":7,"column":24},"end":{"line":7,"column":53}},"6":{"start":{"line":8,"column":24},"end":{"line":21,"column":5}},"7":{"start":{"line":22,"column":21},"end":{"line":22,"column":50}},"8":{"start":{"line":23,"column":15},"end":{"line":23,"column":41}},"9":{"start":{"line":24,"column":18},"end":{"line":24,"column":111}},"10":{"start":{"line":25,"column":19},"end":{"line":25,"column":48}},"11":{"start":{"line":26,"column":4},"end":{"line":26,"column":53}},"12":{"start":{"line":27,"column":4},"end":{"line":39,"column":5}},"13":{"start":{"line":28,"column":8},"end":{"line":28,"column":53}},"14":{"start":{"line":29,"column":19},"end":{"line":29,"column":75}},"15":{"start":{"line":30,"column":8},"end":{"line":32,"column":11}},"16":{"start":{"line":35,"column":8},"end":{"line":35,"column":25}},"17":{"start":{"line":36,"column":8},"end":{"line":38,"column":11}},"18":{"start":{"line":41,"column":0},"end":{"line":41,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":13},"end":{"line":6,"column":14}},"loc":{"start":{"line":6,"column":31},"end":{"line":40,"column":1}},"line":6}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/step/createStepFunction.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/step/createStepFunction.ts"],"names":[],"mappings":";;;AAAA,mDAAuD;AAEvD,qCAAuC;AAEhC,MAAM,IAAI,GAAG,KAAK,EAAE,MAAuB,EAAE,EAAE;IAClD,IAAI,aAAa,GAAG,IAAI,uBAAa,EAAE,CAAC;IAExC,IAAI,aAAa,GAAG;QAChB,SAAS,EAAE,mCAAmC;QAC9C,SAAS,EAAE,MAAM;QACjB,QAAQ,EAAE;YACN,MAAM,EAAE;gBACJ,MAAM,EAAE,MAAM;gBACd,SAAS,EAAE,EAAE;gBACb,MAAM,EAAE,SAAS;aACpB;YACD,SAAS,EAAE;gBACP,MAAM,EAAE,SAAS;aACpB;SACJ;KACJ,CAAA;IACD,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;IAC/C,IAAI,IAAI,GAAG,0BAA0B,CAAA;IACrC,IAAI,OAAO,GAAG,6FAA6F,CAAA;IAE3G,MAAM,MAAM,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,CAAA;IAC5C,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;IAEhD,IAAI;QACA,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAA;QAC5C,IAAI,IAAI,GAAG,MAAM,aAAa,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;QAEpE,OAAO,IAAA,gCAAkB,EAAC;YACtB,IAAI,EAAE,IAAI;SACb,CAAC,CAAC;KACN;IACD,OAAO,GAAG,EAAE;QACR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,OAAO,IAAA,gCAAkB,EAAC;YACtB,GAAG,EAAE,GAAG;SACX,CAAC,CAAC;KACN;AAEL,CAAC,CAAA;AAvCY,QAAA,IAAI,QAuChB","sourcesContent":["import { formatJSONResponse } from \"@libs/api-gateway\";\r\nimport { APIGatewayEvent } from \"aws-lambda\";\r\nimport { StepFunctions } from 'aws-sdk'\r\n\r\nexport const main = async (_event: APIGatewayEvent) => {\r\n    let stepFunctions = new StepFunctions();\r\n\r\n    let definitionObj = {\r\n        \"Comment\": \"A description of my state machine\",\r\n        \"StartAt\": \"Wait\",\r\n        \"States\": {\r\n            \"Wait\": {\r\n                \"Type\": \"Wait\",\r\n                \"Seconds\": 10,\r\n                \"Next\": \"Success\"\r\n            },\r\n            \"Success\": {\r\n                \"Type\": \"Succeed\"\r\n            }\r\n        }\r\n    }\r\n    let definition = JSON.stringify(definitionObj);\r\n    let name = 'serverlessAPIStepMachine'\r\n    let roleArn = 'arn:aws:iam::628640267234:role/serverless-step-dev-StatemachinetypescriptRole-1BDVRJBTJFQ9G'\r\n\r\n    const params = { definition, name, roleArn }\r\n    console.log(`PARAMS: ${JSON.stringify(params)}`)\r\n\r\n    try {\r\n        console.log('Sending create request to aws')\r\n        let data = await stepFunctions.createStateMachine(params).promise();\r\n\r\n        return formatJSONResponse({\r\n            data: data,\r\n        });\r\n    }\r\n    catch (err) {\r\n        console.log(err);\r\n        return formatJSONResponse({\r\n            err: err,\r\n        });\r\n    }\r\n\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\step\\deleteStepFunction.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\step\\deleteStepFunction.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":22},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":13},"end":{"line":24,"column":1}},"5":{"start":{"line":7,"column":24},"end":{"line":7,"column":53}},"6":{"start":{"line":8,"column":19},"end":{"line":8,"column":39}},"7":{"start":{"line":9,"column":19},"end":{"line":9,"column":42}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":53}},"9":{"start":{"line":11,"column":4},"end":{"line":23,"column":5}},"10":{"start":{"line":12,"column":8},"end":{"line":12,"column":53}},"11":{"start":{"line":13,"column":19},"end":{"line":13,"column":75}},"12":{"start":{"line":14,"column":8},"end":{"line":16,"column":11}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":25}},"14":{"start":{"line":20,"column":8},"end":{"line":22,"column":11}},"15":{"start":{"line":25,"column":0},"end":{"line":25,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":13},"end":{"line":6,"column":14}},"loc":{"start":{"line":6,"column":30},"end":{"line":24,"column":1}},"line":6}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/step/deleteStepFunction.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/step/deleteStepFunction.ts"],"names":[],"mappings":";;;AAAA,mDAAuD;AAEvD,qCAAuC;AAEhC,MAAM,IAAI,GAAG,KAAK,EAAE,KAAsB,EAAE,EAAE;IACjD,IAAI,aAAa,GAAG,IAAI,uBAAa,EAAE,CAAC;IAExC,MAAM,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC,cAAc,CAAC;IAEpC,MAAM,MAAM,GAAG,EAAE,eAAe,EAAE,EAAE,EAAE,CAAA;IACtC,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;IAEhD,IAAI;QACA,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAA;QAC5C,IAAI,IAAI,GAAG,MAAM,aAAa,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC;QAEpE,OAAO,IAAA,gCAAkB,EAAC;YACtB,IAAI,EAAE,IAAI;SACb,CAAC,CAAC;KACN;IACD,OAAO,GAAG,EAAE;QACR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,OAAO,IAAA,gCAAkB,EAAC;YACtB,GAAG,EAAE,GAAG;SACX,CAAC,CAAC;KACN;AAEL,CAAC,CAAA;AAvBY,QAAA,IAAI,QAuBhB","sourcesContent":["import { formatJSONResponse } from \"@libs/api-gateway\";\r\nimport { APIGatewayEvent } from \"aws-lambda\";\r\nimport { StepFunctions } from 'aws-sdk'\r\n\r\nexport const main = async (event: APIGatewayEvent) => {\r\n    let stepFunctions = new StepFunctions();\r\n\r\n    const { id } = event.pathParameters;\r\n\r\n    const params = { stateMachineArn: id }\r\n    console.log(`PARAMS: ${JSON.stringify(params)}`)\r\n\r\n    try {\r\n        console.log('Sending delete request to aws')\r\n        let data = await stepFunctions.deleteStateMachine(params).promise();\r\n\r\n        return formatJSONResponse({\r\n            data: data,\r\n        });\r\n    }\r\n    catch (err) {\r\n        console.log(err);\r\n        return formatJSONResponse({\r\n            err: err,\r\n        });\r\n    }\r\n\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\step\\index.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\functions\\step\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":0},"end":{"line":16,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/functions/step/index.ts","sources":["D:/Learning/Serverless/serverless-step/src/functions/step/index.ts"],"names":[],"mappings":";;;AAAa,QAAA,kBAAkB,GAAG;IAC9B,kBAAkB,EAAE;QAChB,OAAO,EAAE,+CAA+C;QACxD,MAAM,EAAE;YACJ;gBACI,IAAI,EAAE;oBACF,MAAM,EAAE,MAAM;oBACd,IAAI,EAAE,cAAc;iBACvB;aACJ;SACJ;KACJ;CACJ,CAAA","sourcesContent":["export const createStepFunction = {\r\n    createStepFunction: {\r\n        handler: `src/functions/step/handler.createStateMachine`,\r\n        events: [\r\n            {\r\n                http: {\r\n                    method: 'post',\r\n                    path: 'stepFunction',\r\n                },\r\n            },\r\n        ],\r\n    }\r\n}"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\libs\\api-gateway.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\libs\\api-gateway.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":27},"end":{"line":9,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":8,"column":6}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":27},"end":{"line":4,"column":28}},"loc":{"start":{"line":4,"column":41},"end":{"line":9,"column":1}},"line":4}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/libs/api-gateway.ts","sources":["D:/Learning/Serverless/serverless-step/src/libs/api-gateway.ts"],"names":[],"mappings":";;;AAMO,MAAM,kBAAkB,GAAG,CAAC,QAAiC,EAAE,EAAE;IACtE,OAAO;QACL,UAAU,EAAE,GAAG;QACf,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;KAC/B,CAAA;AACH,CAAC,CAAA;AALY,QAAA,kBAAkB,sBAK9B","sourcesContent":["import type { APIGatewayProxyEvent, APIGatewayProxyResult, Handler } from \"aws-lambda\"\nimport type { FromSchema } from \"json-schema-to-ts\";\n\ntype ValidatedAPIGatewayProxyEvent<S> = Omit<APIGatewayProxyEvent, 'body'> & { body: FromSchema<S> }\nexport type ValidatedEventAPIGatewayProxyEvent<S> = Handler<ValidatedAPIGatewayProxyEvent<S>, APIGatewayProxyResult>\n\nexport const formatJSONResponse = (response: Record<string, unknown>) => {\n  return {\n    statusCode: 200,\n    body: JSON.stringify(response)\n  }\n}\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\libs\\handler-resolver.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\libs\\handler-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":20},"end":{"line":6,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":81}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":20},"end":{"line":4,"column":21}},"loc":{"start":{"line":4,"column":33},"end":{"line":6,"column":1}},"line":4}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/libs/handler-resolver.ts","sources":["D:/Learning/Serverless/serverless-step/src/libs/handler-resolver.ts"],"names":[],"mappings":";;;AAAO,MAAM,WAAW,GAAG,CAAC,OAAe,EAAE,EAAE;IAC7C,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,CAAA;AAC9E,CAAC,CAAC;AAFW,QAAA,WAAW,eAEtB","sourcesContent":["export const handlerPath = (context: string) => {\n  return `${context.split(process.cwd())[1].substring(1).replace(/\\\\/g, '/')}`\n};\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\libs\\lambda.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\libs\\lambda.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":32},"end":{"line":5,"column":71}},"4":{"start":{"line":6,"column":16},"end":{"line":8,"column":1}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":84}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":16},"end":{"line":6,"column":17}},"loc":{"start":{"line":6,"column":29},"end":{"line":8,"column":1}},"line":6}},"branchMap":{},"s":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/libs/lambda.ts","sources":["D:/Learning/Serverless/serverless-step/src/libs/lambda.ts"],"names":[],"mappings":";;;AAAA,sCAA+B;AAC/B,wEAA8D;AAEvD,MAAM,OAAO,GAAG,CAAC,OAAO,EAAE,EAAE;IACjC,OAAO,IAAA,cAAK,EAAC,OAAO,CAAC,CAAC,GAAG,CAAC,IAAA,+BAAmB,GAAE,CAAC,CAAA;AAClD,CAAC,CAAA;AAFY,QAAA,OAAO,WAEnB","sourcesContent":["import middy from \"@middy/core\"\nimport middyJsonBodyParser from \"@middy/http-json-body-parser\"\n\nexport const middyfy = (handler) => {\n  return middy(handler).use(middyJsonBodyParser())\n}\n"]},"all":true},"D:\\Learning\\Serverless\\serverless-step\\src\\step-functions\\machine.ts":{"path":"D:\\Learning\\Serverless\\serverless-step\\src\\step-functions\\machine.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"2":{"start":{"line":4,"column":0},"end":{"line":55,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":0,"1":0,"2":0},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:/Learning/Serverless/serverless-step/src/step-functions/machine.ts","sources":["D:/Learning/Serverless/serverless-step/src/step-functions/machine.ts"],"names":[],"mappings":";;;AACa,QAAA,OAAO,GAAG;IACrB,mBAAmB,EAAE;QACnB,IAAI,EAAE,wBAAwB;QAC9B,UAAU,EAAE;YACV,SAAS,EAAE,gEAAgE;YAC3E,SAAS,EAAE,YAAY;YACvB,QAAQ,EAAE;gBACR,YAAY,EAAE;oBACZ,MAAM,EAAE,MAAM;oBACd,UAAU,EAAE,8DAA8D;oBAC1E,MAAM,EAAE,aAAa;iBACtB;gBACD,aAAa,EAAE;oBACb,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE;wBACT;4BACE,UAAU,EAAE,OAAO;4BACnB,eAAe,EAAE,CAAC;4BAClB,MAAM,EAAE,iBAAiB;yBAC1B;wBACD;4BACE,UAAU,EAAE,OAAO;4BACnB,eAAe,EAAE,CAAC;4BAClB,MAAM,EAAE,kBAAkB;yBAC3B;qBACF;oBACD,SAAS,EAAE,cAAc;iBAC1B;gBAED,iBAAiB,EAAE;oBACjB,MAAM,EAAE,MAAM;oBACd,UAAU,EAAE,6DAA6D;oBACzE,MAAM,EAAE,WAAW;iBACpB;gBAED,kBAAkB,EAAE;oBAClB,MAAM,EAAE,MAAM;oBACd,UAAU,EAAE,8DAA8D;oBAC1E,MAAM,EAAE,WAAW;iBACpB;gBAED,cAAc,EAAE;oBACd,MAAM,EAAE,MAAM;oBACd,OAAO,EAAE,mBAAmB;oBAC5B,OAAO,EAAE,aAAa;iBACvB;gBAED,WAAW,EAAE;oBACX,MAAM,EAAE,MAAM;oBACd,UAAU,EAAE,8DAA8D;oBAC1E,KAAK,EAAE,IAAI;iBACZ;aACF;SACF;KACF;CACF,CAAA","sourcesContent":["\r\nexport const machine = {\r\n  customeStateMachine: {\r\n    name: \"statemachinetypescript\",\r\n    definition: {\r\n      \"Comment\": \"An example of the Amazon States Language using a choice state.\",\r\n      \"StartAt\": \"FirstState\",\r\n      \"States\": {\r\n        \"FirstState\": {\r\n          \"Type\": \"Task\",\r\n          \"Resource\": \"arn:aws:lambda:us-east-1:123456789012:function:FUNCTION_NAME\",\r\n          \"Next\": \"ChoiceState\"\r\n        },\r\n        \"ChoiceState\": {\r\n          \"Type\": \"Choice\",\r\n          \"Choices\": [\r\n            {\r\n              \"Variable\": \"$.foo\",\r\n              \"NumericEquals\": 1,\r\n              \"Next\": \"FirstMatchState\"\r\n            },\r\n            {\r\n              \"Variable\": \"$.foo\",\r\n              \"NumericEquals\": 2,\r\n              \"Next\": \"SecondMatchState\"\r\n            }\r\n          ],\r\n          \"Default\": \"DefaultState\"\r\n        },\r\n\r\n        \"FirstMatchState\": {\r\n          \"Type\": \"Task\",\r\n          \"Resource\": \"arn:aws:lambda:us-east-1:123456789012:function:OnFirstMatch\",\r\n          \"Next\": \"NextState\"\r\n        },\r\n\r\n        \"SecondMatchState\": {\r\n          \"Type\": \"Task\",\r\n          \"Resource\": \"arn:aws:lambda:us-east-1:123456789012:function:OnSecondMatch\",\r\n          \"Next\": \"NextState\"\r\n        },\r\n\r\n        \"DefaultState\": {\r\n          \"Type\": \"Fail\",\r\n          \"Error\": \"DefaultStateError\",\r\n          \"Cause\": \"No Matches!\"\r\n        },\r\n\r\n        \"NextState\": {\r\n          \"Type\": \"Task\",\r\n          \"Resource\": \"arn:aws:lambda:us-east-1:123456789012:function:FUNCTION_NAME\",\r\n          \"End\": true\r\n        }\r\n      }\r\n    },\r\n  }\r\n}"]},"all":true}}